<ion-content hide-nav-bar="true" padding [ngSwitch]="citP.current_div" [ngStyle]="{ 'background-color': citP.bg_color }" text-wrap>



  <div *ngSwitchCase="'div_consent'">
    <span style="line-height: 150%;">

      <img src="'../../assets/unistir_logo.png" alt="" class="hcentr">

      <h1>Information and Consent</h1>

      <p>
        <b>1. Research Project Title</b>
        <br>
        Detecting concealed recognition of known identities using a Smartphone Concealed Information Test (SMART-CIT).
      </p>

      <p>
        <b>2. Why have I been invited to take part?</b>
        <br>
        We are inviting adults (18+ years) who have (1) typical face processing abilities and (2) an android smartphone to take part in our online smartphone concealed information test (SMART-CIT). This test will take approximately 30 minutes to
        complete. Please read through the terms below before agreeing to proceed.
      </p>

      <p>
        <b>3. Background and aims of project</b>
        <br>
        The aim of the experiment is to use a smartphone concealed information test to detect when you recognise a familiar identity. In the test, you will be shown photographs and names of familiar and unfamiliar identities. You are required to
        press yes or no to different items by pressing the smartphone screen. We will record your key presses and response times.
      </p>

      <p>
        <b>4. Do I have to take part?</b>
        <br>
        No. Your participation is entirely voluntary. You may decline to participate or exit the experiment at any given time without any penalty and without specifying any reason, by pressing the ‘Exit’ button or closing the browser. In this case,
        all data will be deleted.
      </p>

      <p>
        <b>5. What will happen if I take part?</b>
        <br>
        You will be asked to open an application on your android smartphone so that you can complete a concealed information test. You will complete some practice trials, 8 blocks of test trials, followed by some short post-test ratings. At the end,
        you will be shown a summary of your data and will press a button to consent to the uploading of your data to a secure server. All data related to you will be processed in accordance with the General Data Protection Regulation (GDPR).
      </p>

      <p>
        <b>6. Are there any potential risks in taking part?</b>
        <br>
        There are no risks involved in participating in this study other than using your smartphone for a short period of time.
      </p>

      <p>
        <b>7. Are there any benefits in taking part?</b>
        <br>
        Undergraduate psychology students will receive experiment participation credits. Otherwise, there are no direct benefits of participating other than your contribution to novel research which might contribute to future practice in the criminal
        justice system.
      </p>

      <p>
        <b>8. What happens to the data I provide?</b>
        <br>
        This study is conducted as a postgraduate MSC dissertation and forms part of the Economic Social Research Council's (ESRC) project on Identifying Novel Markers of Concealed Face Recognition (GUEP447).
        <br>
        All reasonable endeavours will be undertaken to ensure anonymity and to keep your data confidential as specified under the GDPR guidelines. Your data will only be identifiable by a unique participant code (provided at the start and end of the
        experiment). It will further be processed and stored in a password-protected file, analysed and reported accordingly. Only authorised persons (the student, the supervisor, collaborators) will have access to your data. Your IP address will not
        be stored. For the purpose of future research, data relating to this study might be kept for a minimum of 10 years and then be securely destroyed or archived. To withdraw data email: ailsa.millen@stir.ac.uk.
      </p>

      <p>
        <b>9. Will the research be published?</b>
        <br>
        The research will likely be published in a peer-reviewed journal and/or presented at academic conferences. In-keeping with good scientific practice, design hypotheses and data will be available on the Open Science Framework (OSF). Collected
        data will be fully anonymised and you will not be identifiable in any report/publication thereafter. You may contact the supervisor via e-mail should you wish to be notified of any relevant publication output (ailsa.millen@stir.ac.uk).
      </p>

      <p>
        <b>10. Who has reviewed this research project?</b>
        <br>
        The ethical guidelines of this project have been reviewed and approved by the supervisor, Dr A. E. Millen and the General University Ethic Panel.
        <br>
        <br />
        <b>Whom do I contact if I have concerns about this study or I wish to complain?</b>
        <br>
        If you would like to discuss the research please contact the supervisor Dr Ailsa E. Millen ailsa.millen@stir.ac.uk. If you wish to contact someone not directly involved with this study or wish to complain, you may contact the Course Director,
        dimitrios.kourtis@stir.ac.uk or the Head of Psychology, p.a.dudchenko@stir.ac.uk. For questions about the smartphone application: Gaspar Lukacs, University of Vienna (gaspar.lukacs@univie.ac.at).

      </p>

      <h2>Electronic Consent</h2>

      By clicking the "I consent" button below, I confirm that I have read and understood the participation information above and that I consent to the following statements:
      <ul>
        <li>
          I confirm that I have read and understood the Information Sheet explaining the research project and I have had the opportunity to ask questions about the project.
        </li>
        <li>
          I understand that I have been given a unique participant code and I know whom to contact should I wish to withdraw my data within one week from participating in the study.
        </li>
        <li>
          I understand that my participation is voluntary and that I am free to withdraw my data within one week after the study without providing a reason, and without any penalty. I understand that if I withdraw my data, it will be deleted
          accordingly,
          and no more data will be collected from me thereafter.
        </li>
        <li>
          I understand that my responses will be anonymous, and I give permission for the researcher to have access to my responses.
        </li>
        <li>
          I understand that only non-identifiable personal data will be collected.
        </li>
        <li>
          I understand that any data that leaves the research group will be fully anonymised so that I cannot be personally identified.
        </li>
        <li>
          I confirm that I am 18 years old or older.
        </li>
        <li>
          I agree to take part in this study willingly.
        </li>
      </ul>

      <b>Thank you!</b>

    </span>
    <br /><br />
    <div text-center>
      <button ion-button (tap)="citP.switch_divs('div_settings');" color='light' block>I consent</button>
      <br />
    </div>
  </div>

  <div *ngSwitchCase="'div_settings'" style="font-size: 200% !important;" [ngStyle]="{'pointer-events': citP.pointev.div_settings || 'none' }">
    <div style="font-size: 90%;line-height:150%;font-weight:bold">
      Please turn off the internet or set your phone to "flight mode" so that nothing would interrupt the test. Then please provide your age and sex below.
    </div>
    <br />

    <ion-item>
      <ion-label style="font-size: 160% !important;margin-bottom:0;color:black;" fixed>Age</ion-label>
      <ion-input [(ngModel)]="citP.age" type="number" [ngModelOptions]="{standalone: true}" style="font-style:normal;" text-right></ion-input>
    </ion-item>
    <br />
    <ion-item>
      <ion-label style="font-size: 160% !important;margin-bottom:0;color:black">Sex</ion-label>
      <ion-select [(ngModel)]="citP.gender" [ngModelOptions]="{standalone: true}" interface='popover' style="font-size: 140%;">
        <ion-option value='1'>Male</ion-option>
        <ion-option value='2'>Female</ion-option>
        <ion-option value='3'>Other / prefer not to say</ion-option>
      </ion-select>
    </ion-item>

    <div *ngIf='((citP.age > 16 && citP.age < 100) ) && citP.gender != ""'>
      <br />
      <br />
      <div style="font-size: 90%;line-height:150%;font-weight:bold;text-align:left">
        <br />
        In the following task, we use a response-time-based "lie detection" test to try to detect whether or not you recognise certain names and faces. Here, famous identities will serve as items whose
        knowledge you need to be concealing. <b>Please try to imagine yourself in a scenario where you would want to conceal recognising any of the people presented in the test.</b>
        <br /> <br />
        As soon as you tap "OK", the lie detection test starts.
        <b> Keep in mind that you are denying that you know any of the famous personalities.</b>
      </div>

      <br />
      <br />
      <div style="text-align:center">
        <button large ion-button type="button" (tap)="cit_start();" style="font-size: 120% !important;">
          OK
        </button>
      </div>
    </div>

    <br />
    <br />
    <br />
    <br />
  </div>


  <div *ngSwitchCase="'div_blockstart'" [ngStyle]="{'pointer-events': citP.pointev.div_blockstart || 'none' }">

    <div *ngIf='citP.block_text.slice(0, 13) === "<span></span>"'>
      <button ion-button style='text-transform: none;' (tap)='citP.block_text = citP.block_texts[citP.blocknum]' color='light' block>{{trP.show_inst[trP.lang]}}</button>
      <br />
    </div>

    <span [innerHTML]="san_html(citP.block_text)"></span>
    <div text-center>
      <br />
      <br />
      <button ion-button (tap)="citP.runblock();">{{trP.start[trP.lang]}}</button>
      <br />
    </div>
  </div>


  <div *ngSwitchCase="'div_cit_main'">


    <canvas width="10" height="10" #thecanvas></canvas>
    <p id="feed_id"><b>{{citP.feed_text}}</b></p>

    <p id="stimulus">{{citP.stimulus_text}}</p>

    <p (touchstart)="citP.touchstart($event, 'resp_a');" (touchend)="citP.touchend($event, 'resp_a');" id="resp_left" class="resp_buttons"></p>

    <p (touchstart)="citP.touchstart($event, 'resp_b');" (touchend)="citP.touchend($event, 'resp_b');" id="resp_right" class="resp_buttons"></p>

    <p id="start_text" (tap)="citP.visib.start_text = false; citP.start_trials();" *ngIf="citP.visib.start_text">{{trP.taptostart[trP.lang]}}</p>
  </div>


  <div *ngSwitchCase="'div_quests'" [ngStyle]="{'pointer-events': citP.pointev.div_quests || 'none' }">
    <br />
    <br />
    <h3>The lie detection test is now completed and the simulation scenario is over.</h3>
    <br />
    <br />
    <br />
    <b>On this last page, we have a short questionnaire for you. Please answer as honestly as possible!</b>
    <br />
    <br />
    <br />
    First, please indicate your agreement or disagreement with the following statements (from 1 - Strongly agree, to 5 - Strongly disagree).
    <br />
    <br />

    <div *ngFor="let quest of qs_list; index as qnum">
      <hr />
      <hr />
      <br />
      <ion-label style="font-size: 100% !important;margin-bottom:0;color:black;font-style:italic;">{{quest}}</ion-label>
      <ion-select [(ngModel)]="citP.misc_ratings[qnum]" [ngModelOptions]="{standalone: true}" interface='popover' style="font-size: 100%;" placeholder='(please choose)'>
        <ion-option value='1'>1 - Strongly agree</ion-option>
        <ion-option value='2'>2 - Agree</ion-option>
        <ion-option value='3'>3 - Neutral</ion-option>
        <ion-option value='4'>4 - Disagree</ion-option>
        <ion-option value='5'>5 - Strongly disagree</ion-option>
      </ion-select>
      <br />

    </div>

    <div *ngIf='citP.misc_ratings[14] != "9"' (tap)='tapcount()'>
      <hr />
      <hr />
      <br />
      <ion-label style="font-size: 100% !important;margin-bottom:0;color:black;font-style:italic;">
        To demonstrate that you are paying attention, tap anywhere on this question three times.
      </ion-label>
      <ion-select [(ngModel)]="citP.misc_ratings[14]" [ngModelOptions]="{standalone: true}" interface='popover' style="font-size: 100%;" placeholder='(please choose)'>
        <ion-option value='1'>1 - Strongly agree</ion-option>
        <ion-option value='2'>2 - Agree</ion-option>
        <ion-option value='3'>3 - Neutral</ion-option>
        <ion-option value='4'>4 - Disagree</ion-option>
        <ion-option value='5'>5 - Strongly disagree</ion-option>
      </ion-select>
      <br />
    </div>

    <div *ngIf='citP.misc_ratings[14] == "9"'>
      <hr />
      <hr />
      <b>Thanks for paying attention! You can go on.</b>
      <br />
    </div>
    <hr />
    <hr />

    <br />
    <br />
    Finally, for each identity below (that were presented during the test), please rate how familiar you are with them (from 1 - not at all familiar, to 5 - very familiar).
    <br />
    <br />

    <hr />
    <hr />

    <div *ngFor="let probnum of [0,1,2,3,4,5,6,7]">
      <img style="max-height:30%;max-width:30%;vertical-align: middle;" src="{{this.citP.task_images[this.citP.the_probes[probnum]].src}}">
      <ion-select [(ngModel)]="citP.fam_ratings[probnum]" [ngModelOptions]="{standalone: true}" interface='popover' style="font-size: 100%;" placeholder='(please choose)'>
        <ion-option *ngFor="let spoint of scale_famil; index as i" value={{i+1}}>{{spoint}}</ion-option>
      </ion-select>
      <br />
      <hr />
      <hr />
    </div>

    <br />
    <br />



    <div *ngIf='citP.misc_ratings.includes("NA") || citP.fam_ratings.includes("NA")'>
      Please select an answer for each question. Only then can you proceed.
    </div>
    <button *ngIf='!(citP.misc_ratings.includes("NA") || citP.fam_ratings.includes("NA"))' ion-button (tap)='citP.store_data();' color='light' block>
      OK
    </button>
  </div>


  <div *ngSwitchCase="'div_results'" [ngStyle]="{'pointer-events': citP.pointev.div_results || 'none' }">

    <div [hidden]="citP.current_menu != 'm_testres'">

      <div style="clear:both;font-size:110%;text-align:center;padding-bottom:1.5vw;padding-top:1.5vw">
        Summary CIT results for <b>{{citP.cit_results.subj_id}}</b>
      </div>
      <div style="text-align:center;padding-bottom:4.5vw">
        (Date: <b>{{citP.cit_results.date}}</b>)
        <br />
        The information on this page is just for you personally, in case you are interested (i.e., we do not need this data). Below, "Familiar/famous" row represents all famous identities (faces, names) in the test, that we suspect you recognised
        among the unfamiliar identities. The "Unfamiliar" rows (1-4) represent one of each randomly selected non-famous identities in each test, for the sake of comparison.
      </div>

      <div style="overflow-x:auto;background:#f1f1f1">
        <table class='results_table'>
          <tr>
            <th></th>
            <th>RT<sub>P&nbsp;vs&nbsp;I</sub><br /><span class='res_unit'>(ms)</span></th>
            <th>RT<sub>P&nbsp;(SD)</sub><br /><span class='res_unit'>(ms)</span></th>
            <th>RT<sub>I&nbsp;(SD)</sub><br /><span class='res_unit'>(ms)</span></th>
            <th><i>d</i><sub>CIT</sub><br /><span class='res_unit'>&nbsp;</span></th>
            <th>AR<sub>P&nbsp;vs&nbsp;I</sub><br /><span class='res_unit'>(%)</span></th>
            <th>AR<sub>P</sub><br /><span class='res_unit'>(%)</span></th>
            <th>AR<sub>I</sub><br /><span class='res_unit'>(%)</span></th>
          </tr>
          <tr *ngFor="let rowname of ['Familiar/famous', 'Unfamiliar (1)', 'Unfamiliar (2)', 'Unfamiliar (3)', 'Unfamiliar (4)']; index as num;">
            <td>
              {{rowname}}
            </td>
            <td>
              {{citP.cit_results['probe' + (num + 1)]['rt_p_vs_i']}}
            </td>
            <td>
              {{citP.cit_results['probe' + (num + 1)]['rt_probe']}}&nbsp;({{citP.cit_results['probe' + (num + 1)]['rt_probe_sd']}})
            </td>
            <td>
              {{citP.cit_results['probe' + (num + 1)]['rt_irr']}}&nbsp;({{citP.cit_results['probe' + (num + 1)]['rt_irr_sd']}})
            </td>
            <td style="color:#8b0000;">
              {{citP.cit_results['probe' + (num + 1)]['dcit']}}
            </td>
            <td>
              {{citP.cit_results['probe' + (num + 1)]['acc_p_vs_i']}}
            </td>
            <td>
              {{citP.cit_results['probe' + (num + 1)]['acc_probe']}}
            </td>
            <td>
              {{citP.cit_results['probe' + (num + 1)]['acc_irr']}}
            </td>
          </tr>
        </table>
      </div>
      <br />

      Overall accuracy rates (number of correct responses per number of all trials): {{citP.cit_results.ar_overall}}.
      <br />
      <br />
      <div (tap)="ele.class = ele.class == 'show' ? '' :  'show'" [ngClass]="{ expandable : true, hideChildren : ele.class !== 'show', showChildren : ele.class === 'show' }" #ele>
        <b>Description of variables</b>
        <span id='expand'><b>(tap to show)</b></span>
        <span id='collapse'><b>(tap to hide)</b></span>
        <div>
          Response times (for all correct responses, in milliseconds): probe RT mean minus irrelevant RT mean (RT<sub>P&nbsp;vs&nbsp;I</sub>), probe RT mean and standard deviation (RT<sub>P&nbsp;(SD)</sub>), irrelevant RT mean and standard
          deviation (RT<sub>I&nbsp;(SD)</sub>),
          uncorrected Cohen's d between all probe and all irrelevant RTs (<i>d</i><sub>CIT</sub>). Accuracy rates (ratio of correct responses compared to incorrect and too slow responses, in percentage): probe accuracy rate minus irrelevant
          accuracy
          rate (AR<sub>P&nbsp;vs&nbsp;I</sub>), probe accuracy rate (AR<sub>P</sub>), irrelevant accuracy rate (AR<sub>I</sub>). Responses with RT below 150 ms are excluded from all RT and AR analysis, except for the overall accuracy rate
          calculation. Trials (i.e., responses) from practice rounds are not included in any of the statistics above.
        </div>
      </div>

      <br />

      <div (tap)="ele2.class = ele2.class == 'show' ? '' :  'show'" [ngClass]="{ expandable : true, hideChildren : ele2.class !== 'show', showChildren : ele2.class === 'show' }" #ele2>
        <b>Evaluation using <i>d</i><sub>CIT</sub></b>
        <span id='expand'><b>(tap to show)</b></span>
        <span id='collapse'><b>(tap to hide)</b></span>
        <div>
          The <i>d</i><sub>CIT</sub> measure might be used to evaluate whether or not a given probe was recognised. The <i>d</i><sub>CIT</sub> typically falls between around −0.3 and 0.8, where a larger number always indicates a larger likelihood
          of
          the
          recognition of the given probe. As of yet, there is no established optimal cut-off value for the evaluation, but, based on a rough approximation in view of previous results, the following table depicts some possible evaluative labels for
          given boundaries.
          <br />
          <br />

          <div style="overflow-x:auto;white-space: nowrap;">
            <table class='dcit_table'>
              <tr>
                <td><i>d</i><sub>CIT</sub> > 0.4</td>
                <td>strong indication of recognition</td>
              </tr>
              <tr>
                <td><i>d</i><sub>CIT</sub> > 0.3 and <i>d</i><sub>CIT</sub>
                  <= 0.4</td>
                <td>fair indication of recognition
                </td>
              </tr>
              <tr>
                <td><i>d</i><sub>CIT</sub> > 0.1 and <i>d</i><sub>CIT</sub>
                  <= 0.3</td>
                <td>weak indication of recognition
                </td>
              </tr>
              <tr>
                <td><i>d</i><sub>CIT</sub> > 0 and <i>d</i><sub>CIT</sub>
                  <= 0.1</td>
                <td>indeterminate
                </td>
              </tr>
              <tr>
                <td><i>d</i><sub>CIT</sub> > −0.1 and <i>d</i><sub>CIT</sub>
                  <= 0</td>
                <td>weak indication of non-recognition
                </td>
              </tr>
              <tr>
                <td><i>d</i><sub>CIT</sub>
                  <= −0.1</td>
                <td>fair indication of non-recognition
                </td>
              </tr>
            </table>
          </div>

          <br />
          (There is no strong indication of innocence: a very fast probe response is no more expected in case of innocence than in case of guilt.)
        </div>
      </div>
      <br />
      <br />
      In this experiment, <i>d</i><sub>CIT</sub> for <i>Probe 1</i> (the famous identities in each block, either photo or name) should be above ca. 0.20 to consider yourself "caught", i.e., detected as recognising some of these famous identities.
      <br />
      <br />
      For more details, see the <a href="https://github.com/gasparl/citapp_phone" target="_blank">online
        documentation</a>.
      <br />
      <br />
      <hr />
      <br />

      <div style="padding-bottom:3.5vw">
        <i>Path to full data file:</i><br />
        <div style="overflow-x:auto" class='selectable'>
          <b>{{citP.path}}</b>
        </div>
      </div>

      <div style="padding-bottom:3.5vw">
        <i>File name:</i><br />
        <div style="overflow-x:auto" class='selectable'>
          <b>{{citP.cit_results.file_nam_disp}}</b>
        </div>
      </div>
      <hr />
      <button ion-button small type='button' (tap)="goto_menu('m_sendin')" color="light" block>Get full data</button>
    </div>


    <div [hidden]="citP.current_menu != 'm_sendin'">

      <div style="font-size:110%;text-align:center;padding-bottom:1.5vw;padding-top:1.5vw">
        The test is completed, the only step left is to send your data to be stored. Apart from that, if you want to prove your participation, make sure to note down your participation code: <b>{{this.citP.subj_id}}</b>.
      </div>

      <div style="text-align:left;padding-left: 16px;padding-top:1.5vw;">
        First, please try to upload the data to the server by pressing the button below. Make sure to turn off flight mode and have an active internet connection. If the upload is successful, the button will disappear and a success message will
        appear in its place that also contains your completion link. If the upload
        fails, you will get an error message:
        in that case either try again or send data using one of the other options below (in which case we will approve your submission manually).
      </div>
      <i>
        <p *ngIf="!internet_on" style="color: red;">It seems you are not connected to the internet.<br /></p>
      </i>
      <br />
      <span id="storefeed_id" style="color:red;">&nbsp;</span>
      <button *ngIf="notsent" ion-button type='button' (tap)="sendviaphp()" color="light" block>Send to server</button>
      <br /><br />
      <hr />
      <br />
      <div style="text-align:left;padding-left: 16px;padding-top:1.5vw;">
        The data can also be sent (shared, stored) via any chosen local application (e.g. email, cloud storage, etc.).
      </div>
      <span>&nbsp;</span>
      <button ion-button type='button' (tap)="sendviaapp()" color="light" block>Choose application</button>

      <br />
      <div style="text-align:left;padding-left: 16px;padding-top:1.5vw;">
        You can also just simply copy the data to the clipboard. Afterwards it can be pasted into any other application.
      </div>
      <span id="copyfeed_id" style="color:green;">&nbsp;</span>
      <button ion-button type='button' (tap)="to_clipboard()" color="light" block>Copy to clipboard</button>


      <br />
      <hr />
      <img src="'../../assets/unistir_logo.png" alt="" class="hcentr">

      <h1>Participant Debriefing Sheet</h1>

      <p>
        <b>Thank you for participating in this research project.</b>
      </p>

      <p>
        <b>1. Research Project Title</b>
        <br>
        Detecting concealed recognition of known identities using a Smartphone concealed information test (SMART-CIT)
      </p>

      <p>
        <b>2. Background and aims of project</b>
        <br>
        The experiment assesses the utility of the Smartphone Reaction Time Concealed Information Test (SMART-CIT) to detect recognition of familiar identities, presented as photographs of faces and names of familiar celebrities and unfamiliar
        identities, by response times and key press duration. The findings of this research might contribute to advances in future police practice.
      </p>

      <p>
        <b>3. If you wish to withdraw your data</b>
        <br>
        You may withdraw your data within 1 week after participating by contacting the Dr Ailsa E. Millen ailsa.millen@stir.ac.uk and quoting the participant code. Please take a note of the email and participant code for your records.
      </p>

      <p>
        <b>Thank you for participating in our research!</b>
      </p>

      <br />
      <hr />
      <br />

      <div style="padding-bottom:3.5vw">
        <i>Path to all CIT results files on the device:</i><br />
        <div style="overflow-x:auto" class='selectable'>
          <b>{{citP.path}}</b>
        </div>
      </div>

      <div style="padding-bottom:3.5vw">
        <i>File name:</i><br />
        <div style="overflow-x:auto" class='selectable'>
          <b>{{citP.cit_results.file_nam_disp}}</b>
        </div>
      </div>
      <hr />
      <div style="text-align:center;padding-bottom:4.5vw">
        (Subject ID <b>{{citP.cit_results.subj_id}}</b>; Date: <b>{{citP.cit_results.date}}</b>)
      </div>
      <hr />
      <button ion-button small type='button' (tap)="goto_menu('m_testres')" color="light" block>Show main results</button>
    </div>

    <br />
    <br />
    <br />
    <br />
  </div>

  <!-- app console for testing
  <b>{{mycl}}</b>
  <br />
  <input (keypress)="onChange($event)" [(ngModel)]="to_exec" type="text" style="color:red; position:absolute;width:100%;">
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  console end -->

</ion-content>
